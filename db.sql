BEGIN TRANSACTION;
DROP TABLE IF EXISTS "users_pending";
CREATE TABLE "users_pending"
(
    rowid SERIAL PRIMARY KEY NOT NULL,
    name TEXT NOT NULL,
    phone TEXT NOT NULL,
    time_from INTEGER NOT NULL,
    time_to INTEGER NOT NULL,
	date_check_in DATE NOT NULL,
	date_check_out DATE NOT NULL
);
DROP TABLE IF EXISTS "rooms_pending";
CREATE TABLE "rooms_pending" (
	"rowid"	SERIAL NOT NULL,
	"user_id"	INTEGER NOT NULL,
	"room_type"	TEXT NOT NULL,
	"rooms_count"	INTEGER NOT NULL DEFAULT 1,
	"adult_count"	INTEGER NOT NULL DEFAULT 0,
	"child_3_10_count"	INTEGER NOT NULL DEFAULT 0,
	"child_3_count"	INTEGER NOT NULL DEFAULT 0,
	PRIMARY KEY("rowid")
);
DROP TABLE IF EXISTS "rooms_ordered";
CREATE TABLE "rooms_ordered" (
	"id"	SERIAL NOT NULL,
	"user_name"	TEXT NOT NULL,
	"room_id"	INT NOT NULL,
	"date_begin"	DATE NOT NULL,
	"date_end"	DATE NOT NULL,
	"status"	INT,
	PRIMARY KEY("id")
);
INSERT INTO "rooms_ordered" (id,user_name,room_id,date_begin,date_end,status) VALUES (4,4,2,'2017-08-16','2017-08-18',1),
 (3,'Петя',1,'2017-08-28','2017-08-29',2),
 (2,'Вася',1,'2017-08-23','2017-08-26',1),
 (1,'Володя',1,'2017-08-15','2017-08-19',2),
 (5,'Дима',2,'2017-08-21','2017-08-24',2),
 (6,'Петя',2,'2017-08-27','2017-09-02',2),
 (7,'Вася',3,'2017-08-15','2017-08-20',1),
 (8,'Володя',3,'2017-08-22','2017-08-25',1),
 (9,'Дима',3,'2017-08-27','2017-09-05',2),
 (10,'Петя',4,'2017-08-19','2017-08-25',2),
 (11,'Вася',4,'2017-08-30','2017-09-02',1),
 (12,'Володя',5,'2017-08-16','2017-08-17',2),
 (13,'Дима',5,'2017-08-19','2017-08-20',1),
 (14,'Петя',5,'2017-08-23','2017-08-25',1),
 (15,'Вася',5,'2017-08-28','2017-08-29',2),
 (16,'Володя',6,'2017-08-18','2017-08-20',2),
 (17,'Дима',6,'2017-08-22','2017-08-23',2),
 (18,'Петя',6,'2017-08-26','2017-08-28',1),
 (19,'Вася',6,'2017-08-31','2017-09-01',2),
 (20,'Володя',7,'2017-08-15','2017-08-25',1),
 (21,'Дима',7,'2017-08-28','2017-09-03',2),
 (22,'Петя',8,'2017-08-16','2017-08-18',1),
 (23,'Вася',8,'2017-08-21','2017-08-22',2),
 (24,'Володя',8,'2017-08-25','2017-08-27',1),
 (25,'Дима',8,'2017-08-30','2017-08-31',1),
 (26,'Петя',1,'2017-09-02','2017-09-05',2),
 (27,'Вася',1,'2017-09-11','2017-09-15',1),
 (28,'Володя',2,'2017-09-05','2017-09-08',2),
 (29,'Дима',2,'2017-09-10','2017-09-11',1),
 (30,'Петя',3,'2017-09-08','2017-09-15',2),
 (31,'Вася',4,'2017-09-04','2017-09-06',1),
 (32,'Володя',4,'2017-09-08','2017-09-10',1),
 (33,'Дима',4,'2017-09-12','2017-09-13',2),
 (34,'Петя',5,'2017-09-03','2017-09-04',1),
 (35,'Вася',5,'2017-09-07','2017-09-08',2),
 (36,'Володя',5,'2017-09-11','2017-09-12',2),
 (37,'Дима',5,'2017-09-14','2017-09-15',2),
 (38,'Петя',6,'2017-09-03','2017-09-04',2),
 (39,'Вася',6,'2017-09-07','2017-09-10',2),
 (40,'Володя',6,'2017-09-12','2017-09-15',1),
 (41,'Дима',7,'2017-09-06','2017-09-10',2),
 (42,'Петя',7,'2017-09-12','2017-09-15',1),
 (43,'Вася',8,'2017-09-03','2017-09-06',2),
 (44,'Володя',8,'2017-09-09','2017-09-10',1);
DROP TABLE IF EXISTS "rooms";
CREATE TABLE rooms
(
    id INT NOT NULL,
    floor INT DEFAULT 1 NOT NULL,
    room_type TEXT NOT NULL,
	PRIMARY KEY("id")
);
INSERT INTO "rooms" (id,floor,room_type) VALUES (1,1,'Стандарт'),
 (2,2,'Стандарт'),
 (3,1,'Улучшенный 1'),
 (4,2,'Улучшенный 1'),
 (5,1,'Улучшенный 2'),
 (6,2,'Улучшенный 2'),
 (7,1,'Двухкомнатный'),
 (8,2,'Двухкомнатный');
 DROP TABLE IF EXISTS "room_types";
CREATE TABLE "room_types" (
	"id"	SERIAL NOT NULL,
	"capacity"	INT NOT NULL,
	"type"	TEXT NOT NULL UNIQUE,
	"description"	TEXT NOT NULL,
	PRIMARY KEY("id")
);
INSERT INTO "room_types" (capacity,type,description) VALUES (6,'Двухкомнатный','Проживние: до 6 человек.  
Оплачивается ВЕСЬ НОМЕР в сутки.

В номере: евроремонт, 2-х спальная деревянная кровать(ортопедический матрац), мягкий раскладывающийся уголок, плазменный телевизор(кабельное TV), холодильник, кондиционер.

Удобства: в номере(душ, умывальник, туалет); горячая и холодная вода круглосуточно. '),
 (3,'Стандарт','Проживание: 2 - 3 человека.
Оплачивается каждый человек в сутки.
Детям от 3 до 10 лет скидка 30%
Детям до 3 лет цена проживания 40 грн.

В номере: евроремонт, холодильник, телевизор(кабельное TV).

Удобства: в номере(душ, умывальник, туалет), горячая и холодная вода круглосуточно.'),
 (5,'Улучшенный 1','Проживание: 2 - 5 человек.
Оплачивается каждый человек в сутки.
Детям от 3 до 10 лет скидка.
Детям до 3 лет цена проживания 40 грн.

В номере: евроремонт, холодильник, телевизор(кабельное TV), кондиционер.

Удобства: в номере(душ, умывальник, туалет); горячая и холодная вода круглосуточно).'),
 (5,'Улучшенный 2','Проживание: 2 - 5 человек.
Оплачивается каждый человек в сутки.
Детям от 3 до 10 лет скидка.
Детям до 3 лет цена проживания 40 грн.

В номере: новый евроремонт, холодильник, телевизор(кабельное TV), кондиционер.

Удобства: в номере(душ, умывальник, туалет); горячая и холодная вода круглосуточно).');
 DROP TABLE IF EXISTS "prices";
CREATE TABLE "prices" (
	"id"	SERIAL NOT NULL,
	"room_type"	TEXT NOT NULL UNIQUE,
	"may"	INT NOT NULL,
	"june"	INT NOT NULL,
	"july"	INT NOT NULL,
	"august"	INT NOT NULL,
	"september"	INT NOT NULL,
	"child_3_price"	INT NOT NULL,
	"child_3_10_discount"	INT NOT NULL,
	PRIMARY KEY("id")
);
INSERT INTO "prices" (room_type,may,june,july,august,september,child_3_price,child_3_10_discount) VALUES ('Стандарт',109,109,219,219,109,40,30),
 ('Улучшенный 1',139,149,249,249,149,40,30),
 ('Улучшенный 2',149,159,279,279,159,40,30),
 ('Двухкомнатный',399,699,1099,1099,399,40,30);
 DROP TABLE IF EXISTS "devices";
CREATE TABLE "devices" (
	"id"	SERIAL NOT NULL,
	"pseudo_id"	TEXT NOT NULL UNIQUE,
	"phone_num"	TEXT,
	"name"	TEXT,
	PRIMARY KEY("id")
);
COMMIT;
